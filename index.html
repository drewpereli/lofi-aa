<!DOCTYPE html>
<html>
  <head>
    <style>

      body {
        background-color: black;
        margin: 0;
        padding: 0;
        overflow: hidden;
        font-size: 1.25rem;
      }


      .main {
        display: flex;
        justify-content: center;
        height: 100vh;
        align-items: center;
        font-family: monospace;
        color: white;
        background-color: black;
      }

      .controls > div {
        padding: .5rem;
        display: flex;
        width: 100vw;
        justify-content: center;
      }

      .controls label {
        margin-right: 1rem;
        width: 9rem;
        text-align: right
      }

    </style>
  </head>
  <body>
    <!-- 1. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="music"></div>
    <div id="speaker"></div>

    <script>

      let videoIds = [
        "dGYPa2PKwnI",
        "BLUVtuWJPRk",
        "ygBckOlpGO0",
        "RlOeW55A2jY",
        "hoxofrHTIwE",
        "MJXNmvDvXn4",
        "jTLRWfIJWyg",
        "ysTXGXJ-pPE",
        "wRgnmnOi0k8",
        "jkr8AuqK81E",
        "_sFLs8Ei1-s",
        "6Q3Lna5ePnw",
        "pfgvngQbMMY",
        "1BOjQpJ1J60",
        "W_EBujROSeM",
        "dILrQ8jh1g4",
        "nPAMRN6RKHk",
        "uSWfkvqBVtk",
        "l-Q6oIC2TU8",
        "9pxQ6k8Oh4E",
        "MIoJ-Bza_r4",
        "JYU0lZu476Q",
        "Y3_w5OLSz9s",
        "z-tM3KO_SYo",
        "6r5dfpomuLc",
        "_djIub6tpa4",
        "M474L3QLvac",
        "7N4OYc4hiW8",
        "C56IqyKOXPM",
        "RTz3A5mEGq4",
        "hxGX_zGDk7c",
        "bHxIwDlyUIU",
        "G0JaTAV_pRU",
        "Ue9Gi_toCjY",
        "EefObOzUZAs",
        "U33NJ7qyYSY",
        "liNgTaYmiYM",
        "SaMQj53TDZg",
        "ETVI7qFkFPc",
        "js4ZR1bu6DI",
        "O9hG3M3PNVI",
        "lxgYl_uvccE",
        "YUDCGpibizw",
        "OGwBDd9KrBo",
        "NNgVtcfcjuI",
        "0Ctz66eEX0Q",
        "OAuFwVbxWc0",
        "L_Od2RJgtro",
        "nhiBu1oqt7Q",
        "F0Cv8v1NDro",
        "uCi_riVhnNM",
        "R0-PN6PhG9U",
        "q9x5ZnhACf8",
        "sMEMCOz08zs",
        "JO8tWrF3vlI",
        "GyUZdRDBbmQ",
        "XkF-mWtstew",
        "48wh7jhjL2A",
        "ulKPl248XaE",
        "rjhw2UdELDE",
        "MGahvjrUQus",
        "zvYNKIWLfqs",
        "VyCOyADx7Jw",
        "ShujMnyYQJQ",
        "iH7DkAyAOoc",
        "R4vzans_p9w",
        "hWYXwUhZzxk",
        "liIOPsTYAEY",
        "7q02iBJU95Q",
        "YKybmoYcmsE",
        "hslLGM5yZoU",
        "AquuStNK9ng",
        "ipNwIRAOFWw",
        "5ODhPc2F97Q",
        "k6m3dQSo91w",
        "z3SPpcv6_N8",
        "NlvxXC1ANEc",
        "JTQHPxCCbVM",
        "jwgJYJgrsIM",
        "2Dt5VQnkdtY",
        "66_psUrb4Mc",
        "Z6HHS4-K5QQ",
        "KRYWECLYkns",
        "7gqmDyPLWe8",
        "I405NrkZXCk",
        "jMS8SuJEXII",
        "nVt8ooZcLCs",
        "vEOwr4zKOnY",
        "0HMYT3YdIzo",
        "WKgW6Z2rqeQ",
        "32sH0RBL6EI",
        "sIiXzFuRYbA",
        "F5wVkmGuhmY",
        "kLRhW6de8B0",
        "TmdvjoJz0h0",
        "5tbXMPjUEl4",
        "k973PM3J-P4",
        "JAjTIpMIzL4",
        "Rx0yuE0aLAM",
        "CRUvuh4FrVA",
        "n-XUoN739l4",
        "XB25kblaIeU",
        "OlbxbT2L-Fs",
        "G0o8I7NwOoM",
        "jQ1T2lOh_h0",
        "ZkQc0N5I0VQ",
        "9vjaXiC9jm4",
        "2hJRReFNMeg",
        "VYH6ly0EJSY",
        "r_o8e8jOMzA",
        "VoBe7_f4r7A",
        "0dxAfkaBIRQ",
        "1R0Lol1DW8M",
        "GA2kWC7D20E",
        "hC0CdqDfWhE",
        "f2e_oUCBql0",
        "gfx8AQhzEKU",
        "VWjgnMFkZA8",
        "HWPTCR-L6vg",
        "8ssSkuXkC_o",
        "5wj1ZXODprE",
        "pSwGwn9suNY",
        "RoFooDq0v_M",
        "czVaC3th6eo",
        "sqJc6S87T7M",
        "4VXczFGzOiQ",
        "SY-UfMHj1Tk",
        "G6avfv12SM4",
        "xkohRVn03R0",
        "gJAJxQS-QFM",
        "9CIfFer96EU",
        "5yx3mL6BFkk",
        "-US_ez89V-s",
        "BLDM-QxSyrg",
        "X5F2qBiUpIA",
        "1NpDvsOmBdI",
        "efC7My1xmLs",
        "LF_5wPX7ixs",
        "oEls6RuA1kU",
        "XI1Hif-pI7I",
        "9f1DBoP9gR4",
        "3XTFTc-lNS8",
        "zBMG0GSRT9U",
        "Ff0yRCBJxgg",
        "3ACfCTnaJXg",
        "sx78YeqAg1I",
        "OBzJFmL8oHY",
        "1L0hemu0vqU",
        "yoyqOi5-HTQ",
        "zBDIkIEI9_M",
        "lar_vb_nq6I",
        "9qPMKqu-h1U",
        "Zv9kUVt-NTE",
        "CmhjMyM8PyY",
        "2VLtu2TXO2Q",
        "1M-_LjPaUR4",
        "l-jN169DQSg",
        "3hr2-kzXUjA",
        "6_U7GEhc4lw",
        "8y3R0N9OQIM",
        "adb7DdYl9Ew",
        "QwyJOeHjwBk",
        "Do5aYWrikA8",
        "Dnuutw1-6Es",
        "WK7BPigDWHQ",
        "Hk1XbxHdRls",
        "rGYGPSzJn6s",
        "14odWr-sz9Y",
        "G4S0bDeVVgY",
        "eba0TRdGjZc",
        "dv9KHBoGI6I",
        "-4DIWMhjRmM",
        "MwiA8q80S-0",
        "vk5LPBklbe8",
        "9GmFIKZx-pI",
        "px7CGCZ1daU",
        "V2R3q-kPDV4",
        "hW8DifHxF6w",
        "hjOClEqpBcM",
        "E-zfkVkV1os",
        "9ac15OrL918",
        "uiXz3OhGACI",
        "v5L-QKOQjrM",
        "l1NuJCXB44U",
        "Y8UOJGf34SI",
        "dFcefjXwd1Q",
        "uLnkiuxv-nc",
        "NhiGYpfJYjo",
        "zTdwYSogWEU",
        "XNCmet6ksGA",
        "6k0BQScjLIA",
        "0xgFlX90myg",
        "h5wF8SBGs28",
        "R3ORRbgq9sU",
        "QIXMhq6v3ik",
        "ELEvhFaVSh8",
        "zRWroQrd66g",
        "neSCIqDT9ZY",
        "yBZvOneejeA",
        "IFOg5l1vKyY",
        "9fSKeLyP7es",
        "QlI9YRxB1LA",
        "NR2G69zf86Q",
        "3fasEdJlXr4",
        "r9m51hMuiok",
        "y9mVrFgGlO8",
        "Cldlq4A9a-Y",
        "JoaTykk71eM",
        "GW6OO-hR6qg",
        "plESyfjUj78",
        "JFsL99gVm5E",
        "13D2DD45aV0",
        "Q4yCwYb6fME",
        "DE-Fx9fsjDM",
        "C65A5FXl2TI",
        "hfhq8FnToMI",
        "UvRLb-F9Bj4",
        "DjgOqvvOJ7s",
        "iaszFVXo9hU",
        "VEzKvTgv4Rk",
        "azjwVyof8oA",
        "YFYOQchmdOI",
        "dfGuH__oY3Y",
        "8lwYpUB97F4",
        "heXJkC-PWzY",
        "ohAdC3zNz-M",
        "a852FIdgwb0",
        "LDuBKPcBCjQ",
        "RW0FFvBdSyM",
        "zUH9SefLna4",
        "EghrchcYURM",
        "xWrI-Ea9xtE",
        "vM_KhHSdW2I",
        "81p_EWW_-5o",
        "NtvVMsqRbqY",
        "-nVwxB2W8EM",
      ];

      // 2. This code loads the IFrame Player API code asynchronously.
      var tag = document.createElement('script');

      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      // 3. This function creates an <iframe> (and YouTube player)
      //    after the API code downloads.
      var musicPlayer, speakerPlayer, currentVideoIdx;
      function onYouTubeIframeAPIReady() {
        let musicPlayer = new YT.Player('music', {
          height: '0',
          width: '0',
          videoId: '5qap5aO4i9A',
          events: {
            'onReady': onPlayerReady.bind(null, 'music'),
          }
        });

        let videoId = getRandomVideoDifferentFromLast();

        let speakerPlayer = new YT.Player('speaker', {
          height: '0',
          width: '0',
          startSeconds: 100,
          videoId: videoId,
          events: {
            'onReady': onPlayerReady.bind(null, 'speaker'),
            'onStateChange': onPlayerStateChange
          }
        });

        document.getElementById('speaker-volume').addEventListener('input', e => {
          let val = e.target.value;
          speakerPlayer.setVolume(val);
        });

        document.getElementById('music-volume').addEventListener('input', e => {
          let val = e.target.value;
          musicPlayer.setVolume(val);
        });
      }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(playerId, event) {

        event.target.playVideo();

        if (playerId === 'music'){
          event.target.setVolume(50);
        }
        else {
          event.target.setVolume(100);
        }
      }

      function onPlayerStateChange(event){
        if (event.data === 0){

          let speakerEl = document.getElementById('speaker');

          let parentEl = speakerEl.parentElement;

          parentEl.removeChild(speakerEl);

          let newEl = document.createElement('div');
          newEl.setAttribute('id', 'speaker');

          parentEl.appendChild(newEl);

          let videoId = getRandomVideoDifferentFromLast();

          speakerPlayer = new YT.Player('speaker', {
            height: '0',
            width: '0',
            videoId,
            events: {
              'onReady': onPlayerReady.bind(null, 'speaker'),
              'onStateChange': onPlayerStateChange
            }
          });
        }
      }

      function getRandomVideoDifferentFromLast(){
        let videoIdx;
        do {
          videoIdx = Math.floor(Math.random() * videoIds.length);
        }
        while (videoIdx === currentVideoIdx)

        currentVideoIdx = videoIdx;

        let videoId = videoIds[videoIdx];

        return videoId;
      }

    </script>

    <div class="main">
      <div class="controls">
        <div class="speaker-volume-container">
          <label for="speaker-volume">Speaker Volume</label>
          <input id="speaker-volume" type="range" value="100" min="0" max="100">
        </div>
        <div class="music-volume-container">
          <label for="music-volume">Music Volume</label>
          <input id="music-volume" type="range" value="50" min="0" max="100">
        </div>
      </div>
    </div>
  </body>

</html>
